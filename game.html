<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
    </head>
    <header id="buttonSpace">
        <button onclick="pickSize()">Start</button>
    </header>
    <body>
        <section id="tablespace">

        </section>
        
        <style>
            td {
                border: 1px solid black;
                width: 20px;
                height: 20px;
                max-width: 20px;
                max-height: 20px;
            }

            table{
                border: 1px solid black;
                width: 200px;
                height: 100px;
            }

            .coin{
                background-color: red;
                margin: auto;
                width: 20px;
                height: 20px;
                border-radius: 50px;
            }

            .coin2{
                background-color: yellow;
                margin: auto;
                width: 20px;
                height: 20px;
                border-radius: 50px;
            }
        </style>

        <script>
            class player{
                constructor(c, w, l, t){
                    this.color = c;
                    this.wins = w;
                    this.loses = l;
                    this.turnvalue;
                }
            }

            const tablePos = []; //index of positions
            const tableValues = []; //moves made based on index

            var space = document.getElementById("tablespace");

            var One = new player()

            function checkID(the_id){
                console.log(the_id);
            }

            function checkColumn(the_id){
                let num = String(the_id);
                let val = num[1];
                console.log("Column number = " + val);
            }

            function findOpenRow(the_id){
                console.log(the_id);
                var row = the_id[1];
                var col = the_id[4];
                let columnStats = [];
                /*
                let p = 0;
                while( p < 6){
                    if(document.getElementById("["+p+"]["+col+"]").hasChildNodes()){
                        if(p == 0){
                            break;
                        }
                        document.getElementById("["+(p-1)+"]["+col+"]").appendChild(document.createTextNode(
                            "Filled"
                        ));
                    }
                    p++;
                }
                */

                for(let i = 0; i < 6; i++){ //looks at if column is filled
                    let temp = document.getElementById("["+i+"]["+col+"]");
                    if (temp.hasChildNodes() == false){
                        columnStats.push('0');
                    }else{
                        columnStats.push('1');
                    }
                }
                for(let j = columnStats.length - 1; j >= 0; j--){
                    console.log(columnStats[j] == String(0));
                    if(columnStats[j] === String(0)){
                        if(columnStats[j+1] === String(0)){
                            continue;
                        }else{
                            placePiece("["+j+"]["+col+"]");
                            return;
                        }
                    }
                }
                
            }

            function placePiece(the_id){
                checkID(the_id);
                checkColumn(the_id);
                let x = document.getElementById(the_id);
                y = document.createElement("div");
                y.setAttribute("class", "coin");
                x.appendChild(y);
            }

            function pickSize(){
                var place = document.getElementById("buttonSpace");

                var buttonSmall = document.createElement("button");
                buttonSmall.innerHTML = "Board Size 6x7"
                buttonSmall.setAttribute("onclick", "makeTable(6,7)");
                place.appendChild(buttonSmall);

                var buttonBig = document.createElement("button");
                buttonBig.innerHTML = "Board Size 8x9"
                buttonBig.setAttribute("onclick", "makeTable(8,9)");
                place.appendChild(buttonBig);
            }

            function removeTable(table){
                while(table.firstChild){
                    table.removeChild(table.firstChild);
                }
                return table;
            }
            
            function makeTable(Grow, Gcolumn){
                var table = document.createElement("table");
                
                removeTable(space); //removes preivious  table

                var tableArea = new Array(Gcolumn); 
                for(let i; i < Grow; i++){
                    table[i] = new Array(Grow);
                }
                

                for(let i = 0; i < Grow; i++){
                    var row = document.createElement("tr");
                    for(let j = 0; j < Gcolumn; j++){
                        var cell = document.createElement("td");
                        //cell.innerHTML = j
                        tablePos.push("["+String(i)+"]"+"["+String(j)+"]");
                        tableValues.push("0");
                        cell.setAttribute("id", "["+String(i)+"]"+"["+String(j)+"]");
                        cell.setAttribute("onclick", "findOpenRow(this.id)");
                        row.appendChild(cell);
                    }
                    table.appendChild(row);
                }
                space.appendChild(table);
                console.log(tableValues);
                console.log(tablePos);
            }
        </script>
    </body>
</html>